# 典型回答

都说TCP是提供可靠传输的，那么这个可靠怎么理解呢？

我觉得描述一个网络协议可靠，至少要满足以下几点：

1、数据完整性，我传给你的是123，你收到的也得是123，不能是13<br />2、数据顺序，我是按照123给你的，你不能按照213收到。<br />3、不能重复，我传给你的是123，你不能给我接收成1223<br />4、不被篡改，我传给你的是123，你不能接收成12`3

所以，要保证以上几点，TCP主要做了以下几个事情：

应用数据被分割成 TCP 认为最适合发送的数据块。TCP 给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。

**校验和**： TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。

**三次握手&四次挥手**：TCP通过三次握手建立连接和四次挥手关闭连接，确保通信的可靠性和数据的可靠传输。

**流量控制**： TCP 连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议。 （TCP 利用滑动窗口实现流量控制）

**拥塞控制**： TCP使用拥塞控制算法来确保网络中没有过多的数据导致拥塞。当网络拥塞时，发送端会减少发送速率，以避免进一步加重网络拥塞。常用的拥塞控制算法包括慢启动、拥塞避免和快速重传等。

**ARQ协议**： 也是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。

**超时重传**： 当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。

