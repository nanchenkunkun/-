# 布隆过滤器

**1、数据结构**

布隆过滤器是一个BIT数组，本质上是一个数据，所以可以根据下标快速找数据

![](img\1.png)

## 2、哈希映射

1、布隆需要记录见过的数据，这里的记录需要通过hash函数对数据进行hash操作，得到数组下标并存储在BIT 数组里记为1。这样的记录一个数据只占用1BIT空间

2、判断是否存在时：给布隆过滤器一个数据，进行hash得到下标，从BIT数组里取数据如果是1 则说明数据存在，如果是0 说明不存在

## 3、精确度

hash算法存在碰撞的可能，所以不同的数据可能hash为一个下标数据，故为了提高精确度就需要 使用多个hash 算法标记一个数据，和增大BIT数组的大小

也是因为如此，布隆过滤器判断为【数据存在】 可能数据并不存在，但是如果判断为【数据不存在】那么数据就一定是不存在的。

## 4、详细介绍

**1.什么是布隆过滤器**

​		本质上布隆过滤器是一种数据结构，比较巧妙的`概率型数据结构`，特点是`高效地插入和查询`。根据查询结果可以用来告诉你 `某样东西一定不存在或者可能存在` 这句话是该算法的核心。

相比于传统的 List、Set、Map 等数据结构，它更高效、占用空间更少，但是缺点是其返回的结果是概率性的，而不是确切的，同时布隆过滤器还有一个缺陷就是

`数据只能插入不能删除`。

#### 2、数据如何存入布隆过滤器

布隆过滤器是`由一个很长的bit数组和一系列哈希函数组成的`。

**数组的每个元素都只占1bit空间，并且每个元素只能为0或1。**

布隆过滤器还拥有k个哈希函数，当一个元素加入布隆过滤器时，会使用k个哈希函数对其进行k次计算,得到k个哈希值，并且根据得到的哈希值，在维数组中把对应下标的值置位1。

**判断某个数是否在布隆过滤器中，就对该元素进行k次哈希计算，得到的值在位数组中判断每个元素是否都为1，如果每个元素都为1，就说明这个值在布隆过滤器中。**

#### 3、布隆过滤器为什么会有误判

当插入的元素越来越多时，当一个不在布隆过滤器中的元素，经过同样规则的哈希计算之后，得到的值在位数组中查询，有可能这些位置因为其他的元素先被置1了。（hash冲突）

所以布隆过滤器存在误判的情况，但是**如果布隆过滤器判断某个元素不在布隆过滤器中，那么这个值就一定不在**。

#### 4、使用场景

- **网页爬虫对URL的去重**，避免爬去相同的URL地址。
- **垃圾邮件过滤**，从数十亿个垃圾邮件列表中判断某邮箱是否是杀垃圾邮箱。
- **解决数据库缓存击穿**，黑客攻击服务器时，会构建大量不存在于缓存中的key向服务器发起请求，在数据量足够大的时候，频繁的数据库查询会导致挂机。
- **秒杀系统**，查看用户是否重复购买。

